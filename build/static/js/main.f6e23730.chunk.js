(this["webpackJsonpcomment-system"]=this["webpackJsonpcomment-system"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/green_headshot.3c794623.svg"},,function(e,t,a){},function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/blue_headshot.d037e85f.svg"},function(e,t,a){e.exports=a.p+"static/media/purple_headshot.dbf5a908.svg"},function(e,t,a){e.exports=a.p+"static/media/red_headshot.8ec47319.svg"},function(e,t,a){e.exports=a.p+"static/media/teal_headshot.e8717cf2.svg"},function(e,t,a){e.exports=a.p+"static/media/yellow_headshot.5d4b777e.svg"},function(e,t,a){e.exports=a(30)},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);a(19);var n=a(0),r=a.n(n),c=a(12),s=a.n(c),o=a(3),l=a.n(o),m=a(4),i=a(1),u=a(7),d=a(2),p=(a(25),a(26),a(27),a(13)),f=a.n(p),b=a(8),h=a.n(b),v=a(14),g=a.n(v),y=a(15),O=a.n(y),j=a(16),E=a.n(j),N=a(17),C=a.n(N),S=function(e){var t=e.comment,a=t.profileImage,c=t.name,s=Object(n.useState)(""),o=Object(i.a)(s,2),l=o[0],m=o[1];return Object(n.useEffect)((function(){switch(a){case"blueProfile":m(f.a);break;case"greenProfile":m(h.a);break;case"purpleProfile":m(g.a);break;case"redProfile":m(O.a);break;case"tealProfile":m(E.a);break;case"yellowProfile":m(C.a);break;default:m(h.a)}}),[a]),r.a.createElement("div",{className:"profile"},r.a.createElement("img",{src:l,alt:"profile",className:"avatar"}),r.a.createElement("p",{className:"comment-author"},c))},w=(a(28),function(e){var t=e.comment,a=e.handleRepliesPress,c=e.handleReplyButtonPress,s=e.replyButtonText,o=e.handleIncrement,l=e.handleDecrement,m=e.voteTally,i=e.voteColorClass,u=e.sendUpdatedVoteToServer,d=e.handleAllRepliesPress;return Object(n.useEffect)((function(){u()}),[m]),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"message"},r.a.createElement("p",null," ",t.message)),r.a.createElement("div",{className:"interactions"},r.a.createElement("button",{className:"reply-btn",onClick:c}," ",s),r.a.createElement("p",{className:"replies",onClick:a}," ",r.a.createElement("i",{className:"comment outline icon"}),"".concat((t.replies||[]).length)),r.a.createElement("p",{onClick:d},r.a.createElement("i",{className:"comments outline icon"}),t.allChildComments),r.a.createElement("p",null,t.date),r.a.createElement("div",{className:"vote"},r.a.createElement("div",{className:"vote-display"}," ",m),r.a.createElement("div",{className:"vote-buttons"},r.a.createElement("i",{className:"thumbs up icon ".concat(i.thumbsUp),onClick:o}),r.a.createElement("i",{className:"thumbs down icon ".concat(i.thumbsDown),onClick:l})))))}),x=function(e){var t=e.comment,a=e.handleRepliesPress,n=e.handleReplyButtonPress,c=e.replyButtonText,s=e.handleIncrement,o=e.handleDecrement,l=e.voteTally,m=e.voteColorClass,i=e.sendUpdatedVoteToServer,u=e.handleAllRepliesPress;return r.a.createElement("div",{className:"message-submitted-state"},r.a.createElement(S,{comment:t}),r.a.createElement(w,{comment:t,handleRepliesPress:a,handleReplyButtonPress:n,replyButtonText:c,handleIncrement:s,handleDecrement:o,voteTally:l,voteColorClass:m,sendUpdatedVoteToServer:i,handleAllRepliesPress:u}))},T=(a(29),function(e){var t=e.visibilityClass,a=e.sendReply,n=e.recordMessage,c=e.recordName,s=e.name,o=e.message;return r.a.createElement("form",{className:"comment-form ".concat(t),method:"POST",name:"form",id:"form",onSubmit:a},r.a.createElement("div",{className:"first-column"},r.a.createElement("input",{type:"text",className:"name-input",placeholder:"Name",name:"name",value:s,maxLength:"12",required:!0,onChange:c}),r.a.createElement("button",{type:"submit",className:"submit-button"},"Submit")),r.a.createElement("textarea",{className:"message-input",name:"message",id:"message",cols:"30",rows:"8",placeholder:"write reply here",value:o,onChange:n,required:!0}))}),P=function e(t){var a=t.comment,c=t.updateCommentsFromReply,s="".concat(a._id),o=Object(n.useRef)(null),p=Number(localStorage.getItem("message".concat(s))),f=Object(n.useState)(""),b=Object(i.a)(f,2),h=b[0],v=b[1],g=Object(n.useState)(""),y=Object(i.a)(g,2),O=y[0],j=y[1],E=Object(n.useState)("reply"),N=Object(i.a)(E,2),C=N[0],S=N[1],w=Object(n.useState)(""),P=Object(i.a)(w,2),k=P[0],D=P[1],R=Object(n.useState)(""),_=Object(i.a)(R,2),I=_[0],U=_[1],B=Object(n.useState)(a.currentVoteTally),A=Object(i.a)(B,2),q=A[0],J=A[1],V=Object(n.useState)({thumbsUp:"",thumbsDown:""}),M=Object(i.a)(V,2),Q=M[0],F=M[1],L=Object(n.useState)(p||0),Z=Object(i.a)(L,2),z=Z[0],G=Z[1];Object(n.useEffect)((function(){1===z&&F(Object(d.a)(Object(d.a)({},Q),{},{thumbsUp:"green-vote",thumbsDown:""})),-1===z&&F(Object(d.a)(Object(d.a)({},Q),{},{thumbsDown:"red-vote",thumbsUp:""}))}),[]);var H=function(){var e=Object(m.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/vote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentVoteTally:q,_id:s,dbToQuery:"TestComment"})});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),K=function(){return v(""===h||"close-replies"===h?"open-replies":"close-replies")},W=function(){K(),Object(u.a)(o.current.querySelectorAll(".replies")).forEach((function(e){e.click()}))},X=(a.replies||[]).map((function(t){return r.a.createElement(e,{key:t._id,comment:t,updateCommentsFromReply:c,handleAllRepliesPress:W,showReplies:h})})),Y=function(){var e=Object(m.a)(l.a.mark((function e(t){var n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new Date,e.prev=2,e.next=5,fetch("/reply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k,message:I,date:n,parent_id:a._id,dbToQuery:"TestComment"})});case 5:return r=e.sent,e.next=8,r.json();case 8:s=e.sent,D(""),U(""),j("invisible"),S("reply"),c(s),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"message-container"},r.a.createElement(x,{comment:a,handleRepliesPress:K,handleReplyButtonPress:function(){""===O||"invisible"===O?(j("visible"),S("cancel")):(j("invisible"),S("reply"))},replyButtonText:C,handleDecrement:function(){0===z||1===z?(0===z&&J(q-1),1===z&&J(q-2),G(-1),localStorage.setItem("message".concat(s),"-1"),F(Object(d.a)(Object(d.a)({},Q),{},{thumbsDown:"red-vote",thumbsUp:""}))):(J(q+1),F(Object(d.a)(Object(d.a)({},Q),{},{thumbsDown:""})),G(0),localStorage.setItem("message".concat(s),"0"))},handleIncrement:function(){1!==z?(0===z&&J(q+1),-1===z&&J(q+2),G(1),localStorage.setItem("message".concat(s),"1"),F(Object(d.a)(Object(d.a)({},Q),{},{thumbsUp:"green-vote",thumbsDown:""}))):(J(q-1),F(Object(d.a)(Object(d.a)({},Q),{},{thumbsUp:""})),G(0),localStorage.setItem("message".concat(s),"0")),console.log(q)},voteTally:q,voteColorClass:Q,sendUpdatedVoteToServer:H,handleAllRepliesPress:W}),r.a.createElement(T,{visibilityClass:O,id:a._id,sendReply:Y,recordMessage:function(e){U(e.target.value)},recordName:function(e){D(e.target.value)},name:k,message:I}),r.a.createElement("div",{className:"reply-container ".concat(h),ref:o},X))},k=function(e){return e.reduce((function(e,t){return e.allChildComments+t.allChildComments})).allChildComments},D=function e(t){for(;t.filter((function(e){return"0"===e.parent_id})).length===t.length;)return t;for(var a=t.length-1;a>-1;a--)for(var n=t.length-1;n>-1;n--)if(t[a].parent_id===t[n]._id)return t[n].replies=[].concat(Object(u.a)(t[n].replies),[t[a]]),t[n].allChildComments=t[n].replies.length+k(t[n].replies),t.splice(a,1),e(t)},R=(a(10),function(e){var t=e.addNewComment,a=e.name,n=e.message,c=e.recordName,s=e.recordMessage;return r.a.createElement("form",{className:"comment-form-initial",method:"POST",name:"form",id:"form",onSubmit:t},r.a.createElement("div",{className:"first-column"},r.a.createElement("input",{type:"text",className:"name-input",placeholder:"Name",name:"name",value:a,required:!0,onChange:c,tabIndex:"1"}),r.a.createElement("button",{type:"submit",className:"submit-button",tabIndex:"0"},"Submit")),r.a.createElement("textarea",{className:"message-input",name:"message",id:"message",cols:"30",rows:"8",placeholder:"write new message here",value:n,onChange:s,tabIndex:"2",required:!0}))}),_=(a(11),function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),d=u[0],p=u[1],f=Object(n.useState)([]),b=Object(i.a)(f,2),h=b[0],v=b[1];Object(n.useEffect)((function(){(function(){var e=Object(m.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dbToQuery:"TestComment"})});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent)&&(a.forEach((function(e){return e.date=g(new Date(e.date))})),D(a),v(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var g=function(e){return e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"})},y=function(){var e=Object(m.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=new Date,e.prev=2,e.next=5,fetch("/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,message:d,date:a,dbToQuery:"TestComment"})});case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent)&&(r.forEach((function(e){return e.date=g(new Date(e.date))})),D(r),s(""),p(""),v(r)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){e.forEach((function(e){return e.date=g(new Date(e.date))})),D(e),v(e)};return r.a.createElement("div",{className:"all-messages-container"},(h||[]).map((function(e){return r.a.createElement(P,{key:e._id,comment:e,updateCommentsFromReply:O,generateDateString:g,buildAllNestedObjects:D})})),r.a.createElement(R,{recordName:function(e){s(e.target.value)},recordMessage:function(e){p(e.target.value)},addNewComment:y,name:c,message:d}))}),I=function(){return r.a.createElement("div",{className:"comments-header-container"},r.a.createElement("h2",{className:"comments-title"},"Comments: "))},U=function(e){return r.a.createElement("div",{className:"comment-app-container"},r.a.createElement(I,null),r.a.createElement(_,null))};s.a.render(r.a.createElement(U,null),document.querySelector("#root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.f6e23730.chunk.js.map